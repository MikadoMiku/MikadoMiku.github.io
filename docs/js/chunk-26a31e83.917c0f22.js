(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26a31e83"],{"4bb9":function(t,e,n){"use strict";n("c399")},c399:function(t,e,n){},fd3f:function(t,e,n){"use strict";n.r(e);var o=n("7a23"),c=function(t){return Object(o["u"])("data-v-88e3feba"),t=t(),Object(o["s"])(),t},a={class:"blog_container"},i={class:"blog_content_container"},r={class:"container_title"},m={class:"blog_content"},s={class:"blog_comment_container"},d=c((function(){return Object(o["g"])("h1",{class:"container_title"},"comments",-1)})),l={class:"blog_comment_list"},u=["disabled"],b=["onClick"],g={key:0,class:"blog_comment Add_comment_button_content","data-bs-toggle":"modal","data-bs-target":"#addCommentModal"},O=c((function(){return Object(o["g"])("p",null,"+",-1)})),f=[O],p={class:"modal fade",id:"addCommentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog"},C={class:"modal-content"},v=c((function(){return Object(o["g"])("h1",{style:{"margin-top":"20px"}}," What would you like to comment? ",-1)})),h={class:"modal-body"},k={style:{display:"flex","flex-direction":"row-reverse","margin-bottom":"15px","margin-right":"20px","column-gap":"5px"}};function _(t,e,n,c,O,_){var w=Object(o["y"])("BlogCommentOptions");return Object(o["r"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",a,[Object(o["g"])("div",i,[Object(o["g"])("h1",r,Object(o["A"])(this.$data.blogPost.title),1),Object(o["g"])("div",m,[Object(o["g"])("p",null,Object(o["A"])(this.$data.blogPost.content),1)])]),Object(o["g"])("div",s,[d,Object(o["g"])("div",l,[(Object(o["r"])(!0),Object(o["f"])(o["a"],null,Object(o["x"])(t.comments,(function(n){return Object(o["r"])(),Object(o["f"])("button",{key:n._id,onClick:e[0]||(e[0]=function(e){return t.activateComment()}),class:"blog_comment",disabled:t.commentOptionClicked},[2==t.user.permissionLevel||t.user.email==n.createdBy&&1==t.user.permissionLevel?(Object(o["r"])(),Object(o["f"])("i",{key:0,class:"fa fa-gear",onClick:function(e){return t.commentOptionClick(n._id)}},null,8,b)):Object(o["e"])("",!0),Object(o["g"])("p",null,Object(o["A"])(n.content),1),t.commentOptionClicked===n._id?(Object(o["r"])(),Object(o["d"])(w,{key:1,onDeleteComment:function(e){return t.deleteComment(n._id)},onEditComment:function(e){return t.editComment(n._id)}},null,8,["onDeleteComment","onEditComment"])):Object(o["e"])("",!0)],8,u)})),128)),t.user.permissionLevel>=1?(Object(o["r"])(),Object(o["f"])("button",g,f)):Object(o["e"])("",!0)])])]),Object(o["g"])("div",p,[Object(o["g"])("div",j,[Object(o["g"])("div",C,[v,Object(o["g"])("div",h,[Object(o["F"])(Object(o["g"])("textarea",{type:"text",id:"commentContent","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.commentBody=e})},null,512),[[o["C"],t.commentBody]])]),Object(o["g"])("div",k,[Object(o["g"])("button",{onClick:e[2]||(e[2]=function(e){return t.addComment()}),class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addCommentModal"}," Add comment ")])])])])],64)}var w=n("1da1"),y=n("5530"),x=(n("96cf"),n("d3b7"),n("25f0"),n("4de4"),n("c69a")),$=n("0613"),B=n("8611"),S=n("5502"),A=Object(o["j"])({name:"Blog",components:{BlogCommentOptions:B["a"]},mounted:function(){$["a"].state.user.loggedIn&&this.$route.params.blogJson&&(this.$data.blogPost=JSON.parse(this.$route.params.blogJson),this.fetchBlogComments())},computed:Object(y["a"])({},Object(S["b"])({user:"getUser"})),data:function(){return{commentService:new x["a"]("https://safe-forest-05923.herokuapp.com/blogComment",$["a"].state.user.jwt?$["a"].state.user.jwt:void 0),blogPost:{},comments:[],addCommentClicked:!1,commentOptionClicked:"",commentBody:""}},methods:{fetchBlogComments:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$data.commentService.getAll({id:t.$data.blogPost._id.toString()});case 2:t.$data.comments=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},activateComment:function(){},addComment:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={content:t.commentBody,createdBy:t.user.email,createdAt:(new Date).toUTCString(),postId:t.blogPost._id.toString()},e.next=3,t.commentService.post(n);case 3:o=e.sent.data,o&&t.comments.push(o);case 5:case"end":return e.stop()}}),e)})))()},activateCommentModal:function(){this.$data.addCommentClicked=!this.$data.addCommentClicked},commentOptionClick:function(t){this.$data.commentOptionClicked=this.$data.commentOptionClicked===t?"":t},deleteComment:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.commentService.delete(t);case 2:o=n.sent,201===o.statusCode&&(e.comments=e.comments.filter((function(e){var n;return(null===(n=e._id)||void 0===n?void 0:n.toString())!==t})));case 4:case"end":return n.stop()}}),n)})))()}}}),P=(n("4bb9"),n("6b0d")),R=n.n(P);const J=R()(A,[["render",_],["__scopeId","data-v-88e3feba"]]);e["default"]=J}}]);
//# sourceMappingURL=chunk-26a31e83.917c0f22.js.map