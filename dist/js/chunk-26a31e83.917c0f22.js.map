{"version":3,"sources":["webpack:///./src/views/Blog.vue?29d4","webpack:///./src/views/Blog.vue?0544","webpack:///./src/views/Blog.vue","webpack:///./src/views/Blog.vue?5a58"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","key","_hoisted_11","_hoisted_12","_hoisted_13","id","tabindex","_hoisted_14","_hoisted_15","_hoisted_16","style","_hoisted_17","_hoisted_18","render","_ctx","_cache","$props","$setup","$data","$options","_component_BlogCommentOptions","_resolveComponent","_openBlock","_createElementBlock","_Fragment","_toDisplayString","this","blogPost","title","content","_renderList","comments","comment","_id","onClick","$event","activateComment","disabled","commentOptionClicked","user","permissionLevel","email","createdBy","commentOptionClick","_createCommentVNode","_createBlock","onDeleteComment","deleteComment","onEditComment","editComment","_withDirectives","type","commentBody","_vModelText","addComment","defineComponent","name","components","BlogCommentOptions","mounted","store","state","loggedIn","$route","params","blogJson","JSON","parse","fetchBlogComments","computed","mapGetters","data","commentService","BaseService","jwt","undefined","addCommentClicked","methods","getAll","toString","newComment","createdAt","Date","toUTCString","postId","post","addedComment","push","activateCommentModal","commentId","delete","deleteResult","statusCode","filter","c","__exports__"],"mappings":"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","file":"js/chunk-26a31e83.917c0f22.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Blog.vue?vue&type=style&index=0&id=88e3feba&scoped=true&lang=css\"","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, vModelText as _vModelText, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-88e3feba\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"blog_container\" }\nconst _hoisted_2 = { class: \"blog_content_container\" }\nconst _hoisted_3 = { class: \"container_title\" }\nconst _hoisted_4 = { class: \"blog_content\" }\nconst _hoisted_5 = { class: \"blog_comment_container\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", { class: \"container_title\" }, \"comments\", -1))\nconst _hoisted_7 = { class: \"blog_comment_list\" }\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = {\n  key: 0,\n  class: \"blog_comment Add_comment_button_content\",\n  \"data-bs-toggle\": \"modal\",\n  \"data-bs-target\": \"#addCommentModal\"\n}\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"+\", -1))\nconst _hoisted_12 = [\n  _hoisted_11\n]\nconst _hoisted_13 = {\n  class: \"modal fade\",\n  id: \"addCommentModal\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"exampleModalLabel\",\n  \"aria-hidden\": \"true\"\n}\nconst _hoisted_14 = { class: \"modal-dialog\" }\nconst _hoisted_15 = { class: \"modal-content\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", { style: {\"margin-top\":\"20px\"} }, \" What would you like to comment? \", -1))\nconst _hoisted_17 = { class: \"modal-body\" }\nconst _hoisted_18 = { style: {\"display\":\"flex\",\"flex-direction\":\"row-reverse\",\"margin-bottom\":\"15px\",\"margin-right\":\"20px\",\"column-gap\":\"5px\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BlogCommentOptions = _resolveComponent(\"BlogCommentOptions\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"h1\", _hoisted_3, _toDisplayString(this.$data.blogPost.title), 1),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"p\", null, _toDisplayString(this.$data.blogPost.content), 1)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _hoisted_6,\n        _createElementVNode(\"div\", _hoisted_7, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.comments, (comment) => {\n            return (_openBlock(), _createElementBlock(\"button\", {\n              key: comment._id,\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.activateComment())),\n              class: \"blog_comment\",\n              disabled: _ctx.commentOptionClicked\n            }, [\n              (\r\n                            _ctx.user.permissionLevel == 2 ||\r\n                            (_ctx.user.email == comment.createdBy &&\r\n                                _ctx.user.permissionLevel == 1)\r\n                        )\n                ? (_openBlock(), _createElementBlock(\"i\", {\n                    key: 0,\n                    class: \"fa fa-gear\",\n                    onClick: ($event: any) => (_ctx.commentOptionClick(comment._id))\n                  }, null, 8, _hoisted_9))\n                : _createCommentVNode(\"\", true),\n              _createElementVNode(\"p\", null, _toDisplayString(comment.content), 1),\n              (_ctx.commentOptionClicked === comment._id)\n                ? (_openBlock(), _createBlock(_component_BlogCommentOptions, {\n                    key: 1,\n                    onDeleteComment: ($event: any) => (_ctx.deleteComment(comment._id)),\n                    onEditComment: ($event: any) => (_ctx.editComment(comment._id))\n                  }, null, 8, [\"onDeleteComment\", \"onEditComment\"]))\n                : _createCommentVNode(\"\", true)\n            ], 8, _hoisted_8))\n          }), 128)),\n          (_ctx.user.permissionLevel >= 1)\n            ? (_openBlock(), _createElementBlock(\"button\", _hoisted_10, _hoisted_12))\n            : _createCommentVNode(\"\", true)\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_13, [\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"div\", _hoisted_17, [\n            _withDirectives(_createElementVNode(\"textarea\", {\n              type: \"text\",\n              id: \"commentContent\",\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.commentBody) = $event))\n            }, null, 512), [\n              [_vModelText, _ctx.commentBody]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _createElementVNode(\"button\", {\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.addComment())),\n              class: \"btn btn-primary\",\n              \"data-bs-toggle\": \"modal\",\n              \"data-bs-target\": \"#addCommentModal\"\n            }, \" Add comment \")\n          ])\n        ])\n      ])\n    ])\n  ], 64))\n}","\r\nimport { blogComment, blogPost } from \"@/models/blogModels\";\r\nimport BaseService from \"@/services/apiService\";\r\nimport store from \"@/store/index\";\r\nimport { defineComponent } from \"vue\";\r\nimport BlogCommentOptions from \"@/components/BlogCommentOptions.vue\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default defineComponent({\r\n    name: \"Blog\",\r\n    components: { BlogCommentOptions },\r\n    mounted() {\r\n        if (store.state.user.loggedIn && this.$route.params.blogJson) {\r\n            this.$data.blogPost = JSON.parse(\r\n                this.$route.params.blogJson as string\r\n            ) as blogPost;\r\n            this.fetchBlogComments();\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            user: \"getUser\",\r\n        }),\r\n    },\r\n    data() {\r\n        return {\r\n            commentService: new BaseService<blogComment>(\r\n                \"https://safe-forest-05923.herokuapp.com/blogComment\",\r\n                store.state.user.jwt ? store.state.user.jwt : undefined\r\n            ),\r\n            blogPost: {} as blogPost,\r\n            comments: [] as blogComment[],\r\n            addCommentClicked: false,\r\n            commentOptionClicked: \"\",\r\n            commentBody: \"\",\r\n        };\r\n    },\r\n    methods: {\r\n        async fetchBlogComments() {\r\n            this.$data.comments = (\r\n                await this.$data.commentService.getAll({\r\n                    id: this.$data.blogPost._id!.toString(),\r\n                    // id: \"Miku\",\r\n                })\r\n            ).data as blogComment[];\r\n        },\r\n        activateComment() {\r\n            // Maybe make the buttons into a separate component with its own data for clickable actions. TODO!!\r\n        },\r\n        async addComment() {\r\n            const newComment: blogComment = {\r\n                content: this.commentBody,\r\n                createdBy: this.user.email,\r\n                createdAt: new Date().toUTCString(),\r\n                postId: this.blogPost._id!.toString(),\r\n            };\r\n            const addedComment = (await this.commentService.post(newComment))\r\n                .data as blogComment;\r\n            if (addedComment) this.comments.push(addedComment);\r\n        },\r\n        activateCommentModal() {\r\n            this.$data.addCommentClicked = !this.$data.addCommentClicked;\r\n        },\r\n        commentOptionClick(commentId: string) {\r\n            this.$data.commentOptionClicked =\r\n                this.$data.commentOptionClicked === commentId ? \"\" : commentId;\r\n        },\r\n        async deleteComment(commentId: string) {\r\n            const deleteResult = await this.commentService.delete(commentId);\r\n            if (deleteResult.statusCode === 201) {\r\n                this.comments = this.comments.filter(\r\n                    (c) => c._id?.toString() !== commentId\r\n                );\r\n            }\r\n        },\r\n    },\r\n});\r\n","import { render } from \"./Blog.vue?vue&type=template&id=88e3feba&scoped=true&ts=true\"\nimport script from \"./Blog.vue?vue&type=script&lang=ts\"\nexport * from \"./Blog.vue?vue&type=script&lang=ts\"\n\nimport \"./Blog.vue?vue&type=style&index=0&id=88e3feba&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\power\\\\Desktop\\\\blog-vue-project\\\\blog-project\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-88e3feba\"]])\n\nexport default __exports__"],"sourceRoot":""}